# 4.5 to 4.6

### Overview <a href="#overview" id="overview"></a>

This page details out the jobs required to be run as part of the upgrade from Sunbird and Vidaydaan release 4.5.0 to release 4.6.0. Use the following table to understand the jobs that need to be executed in order to successfully complete the upgrade. Any jenkins job configuration or pre-requisites mentioned under manual configuration section needs to be done first before running any of the mentioned jobs. The order of the jobs should also be run as shown below. They can be run in parallel to speed up the execution.

#### Variables for Sunbird <a href="#variables-for-sunbird" id="variables-for-sunbird"></a>

| VARIABLE NAME                   | SERVICE NAME | COMMENTS                                                                                                                                                           |   |   |
| ------------------------------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | - | - |
| sunbird\_portal\_cdn\_blob\_url | Player       | Change value from ‘https://sunbirdstagingpublic.blob.core.windows.net/uci’ to ‘https://sunbirdstagingpublic.blob.core.windows.net/uci/’                            |   |   |
| Add host group                  | Monitoring   | <p>[redis-exporter-targets:children]<br>lp-redis<br>dp-redis<br><br>[redis-cluster:children]<br>redis-exporter-targets<br><br>[core:children]<br>redis-cluster</p> |   |   |

#### Build and Deploy for Sunbird <a href="#build-and-deploy-for-sunbird" id="build-and-deploy-for-sunbird"></a>

| SERVICE TO BE BUILD                     | BUILD TAG           | SERVICE TO DEPLOY                                 | DEPLOY TAG         | COMMENTS                                                                                                                                      |
| --------------------------------------- | ------------------- | ------------------------------------------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------- |
| Build/Plugins/ContentPlayer             | release-4.6.0\_RC1  | Deploy/staging/Plugins/ContentPlayer              | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Plugins/ContentPlugins            | release-4.6.0\_RC2  | Deploy/staging/Plugins/ContentPlugins             | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Core/KafkaSetup                    | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Cassandra              | release-4.6.0\_RC1  | Deploy/staging/Kubernetes/Cassandra               | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Core/OfflineInstaller             | release-4.6.0\_RC25 | Deploy/staging/Core/OfflineInstaller              | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/Keycloak                | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Assessment             | release-4.6.0\_RC2  | Deploy/staging/Kubernetes/Assessment              | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/APIManager              | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/Analytics               | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/CertRegistry            | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/KnowledgeMW             | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Content                | release-4.6.0\_RC2  | Deploy/staging/Kubernetes/Content                 | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/DiscussionsMW          | release-4.6.0\_RC3  | Deploy/staging/Kubernetes/DiscussionsMW           | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Learner                | release-4.6.0\_RC6  | Deploy/staging/Kubernetes/Learner                 | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Lms                    | release-4.6.0\_RC3  | Deploy/staging/Kubernetes/Lms                     | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Nodebb                 | release-4.6.0\_RC3  | Deploy/staging/Kubernetes/Nodebb                  | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Notification           | release-4.6.0\_RC2  | Deploy/staging/Kubernetes/Notification            | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Player                 | release-4.6.0\_RC25 | Deploy/staging/Kubernetes/Player                  | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Search                 | release-4.6.0\_RC2  | Deploy/staging/Kubernetes/Search                  | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/Kubernetes/Taxonomy               | release-4.6.0\_RC2  | Deploy/staging/Kubernetes/Taxonomy                | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/managed-learn/ml-analytics-service | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/managed-learn/ml-core-service     | release-4.6.0\_RC3  | Deploy/staging/managed-learn/ml-core-service      | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/managed-learn/ml-projects-service | release-4.6.0\_RC4  | Deploy/staging/managed-learn/ml-projects-service  | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/managed-learn/ml-survey-service   | release-4.6.0\_RC4  | Deploy/staging/managed-learn/ml-survey-service    | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/UCI/fusionauth                     | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/UCI/Inbound                       | release-4.6.0       | Deploy/staging/UCI/Inbound                        | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/UCI/odk                            | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/UCI/Orchestrator                  | release-4.6.0       | Deploy/staging/UCI/Orchestrator                   | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/UCI/Outbound                      | release-4.6.0       | Deploy/staging/UCI/Outbound                       | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/UCI/Transformer                   | release-4.6.0       | Deploy/staging/UCI/Transformer                    | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/UCI/UCI                           | release-4.6.0       | Deploy/staging/UCI/UCI                            | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | OpsAdministration/staging/Core/GraylogMongoImport | release-4.6.0\_RC2 | graylog\_mongo\_collections: grok\_patterns,pipeline\_processor\_pipelines,pipeline\_processor\_pipelines\_streams,pipeline\_processor\_rules |
|                                         |                     | Deploy/staging/Kubernetes/OnboardConsumers        | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/OnboardAPIs             | release-4.6.0\_RC2 |                                                                                                                                               |
|                                         |                     | Deploy/staging/Kubernetes/Monitoring              | release-4.6.0\_RC2 | tag: dashboards                                                                                                                               |
| Build/KnowledgePlatform/FlinkJobs       | release-4.6.0\_RC5  | Deploy/staging/KnowledgePlatform/FlinkJobs        | release-4.6.0\_RC1 |                                                                                                                                               |
| Build/DataPipeline/EdDataProducts       | release-4.6.0\_RC2  | Deploy/staging/DataPipeline/EdDataProducts        | release-4.6.0\_RC2 |                                                                                                                                               |
| Build/DataPipeline/FlinkPipelineJobs    | release-4.6.0\_RC1  | Deploy/staging/DataPipeline/FlinkPipelineJobs     | release-4.6.0\_RC2 |                                                                                                                                               |

#### Manual Configurations for Sunbird <a href="#manual-configurations-for-sunbird" id="manual-configurations-for-sunbird"></a>

| MANUAL STEP                              | INSTRUCTION                                                                                                                                                                                                                                                         |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Create Kafka Topic                       | <p>Topic Name - .ml.projects.submissions<br><br>This has to be accessible for consumption by data pipeline</p>                                                                                                                                                      |
| Add refresh\_data in ETLUserCacheIndexer | <p>Job Name: ETLUserCacheIndexer<br>parameter: refresh_data<br><br>“Please add refresh_data as another parameter in ETLUserCacheIndexer job.<br><br>make default value as (““false””)”<br><br>https://github.com/project-sunbird/sunbird-devops/pull/3154/files</p> |
| spark-script                             | https://project-sunbird.atlassian.net/wiki/spaces/UM/pages/3050930177/SB-28196+User+org+association+issue+-+Data+correction                                                                                                                                         |
